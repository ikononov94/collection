sudo: required
language: node_js

node_js:
  - 'node'

jobs:
  include:
    - stage: lint
      script: npm run lint
    - stage: unit testing
      script: npm run test
    - stage: regression testing
      script:
        - npm run deploy:server
        - npm run selenium:install
        - npm run selenium:start
        - npm run gemini:test
    - stage: deploy
      script:
        - npm run build
      deploy:
        provider: heroku
        app: radiant-beach-82987
        api-key:
          secure: 293d7180-e627-4b81-ba29-65a762db2314  
        skip_cleanup: true